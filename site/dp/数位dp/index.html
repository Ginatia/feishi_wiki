
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://feishili.netlify.app/dp/%E6%95%B0%E4%BD%8Ddp/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>数位dp - feishi-wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#233-1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="feishi-wiki" class="md-header__button md-logo" aria-label="feishi-wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            feishi-wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              数位dp
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  关于

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../math/GCD_Convolution/" class="md-tabs__link">
          
  
  Math

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Combinatorics/combination/" class="md-tabs__link">
          
  
  Combinatorics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../bit_dp/" class="md-tabs__link">
          
  
  dp

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../miscellaneous/two_pointer/" class="md-tabs__link">
          
  
  miscellaneous

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../atc/ABC015/" class="md-tabs__link">
          
  
  Atcoder

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="feishi-wiki" class="md-nav__button md-logo" aria-label="feishi-wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    feishi-wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Math
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../math/GCD_Convolution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GCD Convolution
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Combinatorics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Combinatorics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Combinatorics/combination/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    combination
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    dp
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            dp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bit_dp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bit dp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dp_on_tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dp on  tree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dp_on_digits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dp on digits
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../range_dp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Range dp
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    miscellaneous
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../miscellaneous/two_pointer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Two pointer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Atcoder
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Atcoder
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC015/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC015
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC016/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC016
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC036/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC036
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC110/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC110
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC127/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC127
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC128/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC128
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC133/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC133
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC160/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC160
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC170/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC170
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC284/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC284
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC325/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC325
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC349/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC349
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../atc/ABC127/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ABC127
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#233-1" class="md-nav__link">
    <span class="md-ellipsis">
      233. 数字 1 的个数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="233. 数字 1 的个数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#n-n-1" class="md-nav__link">
    <span class="md-ellipsis">
      给定一个整数 n，计算所有小于等于 n 的非负整数中数字 1 出现的个数。
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2376" class="md-nav__link">
    <span class="md-ellipsis">
      2376. 统计特殊整数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2719" class="md-nav__link">
    <span class="md-ellipsis">
      2719. 统计整数数目
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#788" class="md-nav__link">
    <span class="md-ellipsis">
      788. 旋转数字
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#902-n" class="md-nav__link">
    <span class="md-ellipsis">
      902. 最大为 N 的数字组合
    </span>
  </a>
  
    <nav class="md-nav" aria-label="902. 最大为 N 的数字组合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1706-2" class="md-nav__link">
    <span class="md-ellipsis">
      面试题 17.06. 2出现的次数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#600-1" class="md-nav__link">
    <span class="md-ellipsis">
      600. 不含连续1的非负整数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#e-e-" class="md-nav__link">
    <span class="md-ellipsis">
      E - 数E - 数
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#d-" class="md-nav__link">
    <span class="md-ellipsis">
      D - 禁止された数字
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#d-1" class="md-nav__link">
    <span class="md-ellipsis">
      D - 1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#e-digit-sum-divisible" class="md-nav__link">
    <span class="md-ellipsis">
      E - Digit Sum Divisible
    </span>
  </a>
  
    <nav class="md-nav" aria-label="E - Digit Sum Divisible">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-c-codeforces" class="md-nav__link">
    <span class="md-ellipsis">
      Problem - C - Codeforces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no741-ascnumbereasy" class="md-nav__link">
    <span class="md-ellipsis">
      No.741 AscNumber(Easy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-beautiful-numbers" class="md-nav__link">
    <span class="md-ellipsis">
      D. Beautiful numbers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>数位dp</h1>

<h5 id="233-1"><a href="https://leetcode.cn/problems/number-of-digit-one/">233. 数字 1 的个数</a></h5>
<h6 id="n-n-1">给定一个整数 <code>n</code>，计算所有小于等于 <code>n</code> 的非负整数中数字 <code>1</code> 出现的个数。</h6>
<pre><code class="language-py">class Solution:
    def countDigitOne(self, n: int) -&gt; int:
        s=str(n)
        @cache
        def f(i:int,cnt:int,is_limit:bool)-&gt;int:
            if i==len(s):
                return cnt
            ans=0
            up=int(s[i]) if is_limit else 9
            for d in range(up+1):
                ans+=f(i+1,cnt+(d==1),is_limit and d==up)
            return ans
        return f(0,0,True)
</code></pre>
<h5 id="2376"><a href="https://leetcode.cn/problems/count-special-integers/">2376. 统计特殊整数</a></h5>
<p>如果一个正整数每一个数位都是 <strong>互不相同</strong> 的，我们称它是 <strong>特殊整数</strong> 。</p>
<p>给你一个 <strong>正</strong> 整数 <code>n</code> ，请你返回区间 <code>[1, n]</code> 之间特殊整数的数目。</p>
<pre><code class="language-python">class Solution:
    def countSpecialNumbers(self, n: int) -&gt; int:
        s = str(n)

        @cache
        def f(i: int, mask: int, is_limit: bool, is_num: bool) -&gt; int:
            if i == len(s):
                return int(is_num)
            ans = 0
            if not is_num:
                ans = f(i+1, mask, False, False)
            up = int(s[i]) if is_limit else 9
            for d in range(1-int(is_num), up+1):
                if mask &amp; (1 &lt;&lt; d) == 0:
                    ans += f(i+1, mask | (1 &lt;&lt; d), is_limit and d == up, True)
            return ans

        return f(0, 0, True, False)
</code></pre>
<h5 id="2719"><a href="https://leetcode.cn/problems/count-of-integers/">2719. 统计整数数目</a></h5>
<p>给你两个数字字符串 <code>num1</code> 和 <code>num2</code> ，以及两个整数 <code>max_sum</code> 和 <code>min_sum</code> 。如果一个整数 <code>x</code> 满足以下条件，我们称它是一个好整数：</p>
<ul>
<li><code>num1 &lt;= x &lt;= num2</code></li>
<li><code>min_sum &lt;= digit_sum(x) &lt;= max_sum</code>.</li>
</ul>
<p>请你返回好整数的数目。答案可能很大，请返回答案对 <code>10**9 + 7</code> 取余后的结果。</p>
<pre><code class="language-python">class Solution:
    def count(self, num1: str, num2: str, min_sum: int, max_sum: int) -&gt; int:
        def calc(n: str) -&gt; int:
            @cache
            def dfs(i: int, s: int, is_limit: bool) -&gt; int:
                if s &gt; max_sum:
                    return 0
                if i == len(n):
                    return s &gt;= min_sum
                ans = 0
                up = int(n[i]) if is_limit else 9
                for d in range(up+1):
                    ans += dfs(i+1, s+d, is_limit and d == up)
                return ans
            return dfs(0, 0, True)

        is_good = min_sum &lt;= sum(map(int, num1)) &lt;= max_sum
        ans = (calc(num2)-calc(num1)+is_good) % (10**9+7)
        return ans
</code></pre>
<h5 id="788"><a href="https://leetcode.cn/problems/rotated-digits/">788. 旋转数字</a></h5>
<p>我们称一个数 X 为好数, 如果它的每位数字逐个地被旋转 180 度后，我们仍可以得到一个有效的，且和 X 不同的数。要求每位数字都要被旋转。</p>
<p>现在我们有一个正整数 <code>N</code>, 计算从 <code>1</code> 到 <code>N</code> 中有多少个数 X 是好数？</p>
<pre><code class="language-python">class Solution:
    def rotatedDigits(self, n: int) -&gt; int:
        dif = (0, 0, 1, -1, -1, 1, 1, -1, 0, 1)
        s = str(n)

        @cache
        def dfs(i: int, hasDif: bool, is_limit: bool) -&gt; int:
            if i == len(s):
                return hasDif
            ans = 0
            up = int(s[i]) if is_limit else 9
            for d in range(up+1):
                if dif[d] != -1:
                    ans += dfs(i+1, hasDif or dif[d], is_limit and d == up)
            return ans
        return dfs(0, False, True)
</code></pre>
<h5 id="902-n"><a href="https://leetcode.cn/problems/numbers-at-most-n-given-digit-set/">902. 最大为 N 的数字组合</a></h5>
<h6 id="_1"></h6>
<p>给定一个按 <strong>非递减顺序</strong> 排列的数字数组 <code>digits</code> 。你可以用任意次数 <code>digits[i]</code> 来写的数字。例如，如果 <code>digits = ['1','3','5']</code>，我们可以写数字，如 <code>'13'</code>, <code>'551'</code>, 和 <code>'1351315'</code>。</p>
<p>返回 <em>可以生成的小于或等于给定整数 <code>n</code> 的正整数的个数</em> 。</p>
<pre><code class="language-python">class Solution:
    def atMostNGivenDigitSet(self, digits: List[str], n: int) -&gt; int:
        s = str(n)

        @cache
        def dfs(i: int, is_limit: bool, is_num: bool) -&gt; int:
            if i == len(s):
                return int(is_num)
            ans = 0
            if not is_num:
                ans += dfs(i+1, False, False)
            up = s[i] if is_limit else '9'

            for d in digits:
                if d &gt; up:
                    break
                ans += dfs(i+1, is_limit and d == up, True)
            return ans
        return dfs(0, True, False)
</code></pre>
<h5 id="1706-2"><a href="https://leetcode.cn/problems/number-of-2s-in-range-lcci/">面试题 17.06. 2出现的次数</a></h5>
<p>编写一个方法，计算从 0 到 n (含 n) 中数字 2 出现的次数。</p>
<pre><code class="language-python">class Solution:
    def numberOf2sInRange(self, n: int) -&gt; int:
        s=str(n)
        @cache
        def dfs(i:int,cnt:int,is_limit:bool)-&gt;int:
            if i==len(s):
                return cnt
            ans=0
            up=int(s[i]) if is_limit else 9
            for d in range(up+1):
                ans+=dfs(i+1,cnt+(d==2),is_limit and d==up)
            return ans
        return dfs(0,0,True)
</code></pre>
<h5 id="600-1"><a href="https://leetcode.cn/problems/non-negative-integers-without-consecutive-ones/">600. 不含连续1的非负整数</a></h5>
<p>给定一个正整数 <code>n</code> ，请你统计在 <code>[0, n]</code> 范围的非负整数中，有多少个整数的二进制表示中不存在 <strong>连续的 1</strong></p>
<pre><code class="language-python">class Solution:
    def findIntegers(self, n: int) -&gt; int:
        s = bin(n)[2:]

        @cache
        def dfs(i: int, one: bool, is_limit: bool) -&gt; int:
            if i == len(s):
                return 1
            ans = 0
            up = int(s[i]) if is_limit else 1
            ans += dfs(i+1, False, is_limit and 0 == up)
            if not one and up == 1:
                ans += dfs(i+1, True, is_limit)
            return ans
        return dfs(0, False, True)
</code></pre>
<h5 id="e-e-"><a href="https://atcoder.jp/contests/tdpc/tasks/tdpc_number#:~:text=%E9%A2%98%E8%A7%A3-,E%20%2D%20%E6%95%B0,-%E9%A2%98%E8%A7%A3">E - 数</a><a href="https://atcoder.jp/contests/tdpc/tasks/tdpc_number#:~:text=%E9%A2%98%E8%A7%A3-,E%20%2D%20%E6%95%B0,-%E9%A2%98%E8%A7%A3">E - 数</a></h5>
<p>求出[1,n) 有多少个数 满足：数位之和是D的倍数，对答案取模<span class="arithmatex"><span class="MathJax_Preview">10^{9}+7</span><script type="math/tex">10^{9}+7</script></span></p>
<pre><code class="language-cpp">using Z = Mint&lt;i64&gt;;
void solve()
{
    int D;
    std::string s;
    std::cin &gt;&gt; D &gt;&gt; s;
    int n = s.size();
    const i64 NIL = -1;
    std::vector dp(n, std::vector&lt;std::vector&lt;i64&gt;&gt;(D, std::vector&lt;i64&gt;(2, NIL)));

    auto dfs = [&amp;](auto self, int i, int r, bool is_limit) -&gt; Z
    {
        if (i == n)
        {
            return r == 0;
        }
        if (dp[i][r][is_limit] != NIL)
        {
            return dp[i][r][is_limit];
        }
        Z ans = 0;
        int up = is_limit ? int(s[i] - '0') : 9;
        for (int d = 0; d &lt;= up; d++)
        {
            ans += self(self, i + 1, (r + d) % D, is_limit and d == up);
        }
        return dp[i][r][is_limit] = ans.v;
    };
    int cnt = 0;
    for (auto i : s)
    {
        cnt += i - '0';
    }
    bool n_ok = cnt % D == 0;
    std::cout &lt;&lt; dfs(dfs, 0, 0, true) - n_ok - 1 &lt;&lt; '\n';
}
</code></pre>
<h5 id="d-"><a href="https://atcoder.jp/contests/abc007/tasks/abc007_4#:~:text=%F0%9F%A7%AA-,D%20%2D%20%E7%A6%81%E6%AD%A2%E3%81%95%E3%82%8C%E3%81%9F%E6%95%B0%E5%AD%97,-%E9%A2%98%E8%A7%A3">D - 禁止された数字</a></h5>
<p>给定范围[A,B],<span class="arithmatex"><span class="MathJax_Preview">1\le A &lt; B\le 10^{18}</span><script type="math/tex">1\le A < B\le 10^{18}</script></span>,求出范围内有多少个数满足：数位中至少有一个4，或有一个6</p>
<pre><code class="language-cpp">using i64 = long long;

i64 calc(i64 num)
{
    std::string s = std::to_string(num);
    int n = s.size();
    const i64 NIL = -1;
    std::vector dp(n, std::vector&lt;std::vector&lt;i64&gt;&gt;(2, std::vector&lt;i64&gt;(2, NIL)));

    auto dfs = [&amp;](auto self, int i, bool forbid, bool is_limit) -&gt; i64
    {
        if (i == n)
        {
            return forbid;
        }
        auto &amp;res = dp[i][forbid][is_limit];
        if (res != NIL)
        {
            return res;
        }
        i64 ans = 0;
        int up = is_limit ? s[i] - '0' : 9;
        for (int d = 0; d &lt;= up; d++)
        {
            ans += self(self, i + 1, forbid or d == 4 or d == 9, is_limit and d == up);
        }
        return res = ans;
    };
    return dfs(dfs, 0, false, true);
}

void solve()
{
    i64 a, b;
    std::cin &gt;&gt; a &gt;&gt; b;
    std::cout &lt;&lt; calc(b) - calc(a - 1) &lt;&lt; '\n';
}
</code></pre>
<h5 id="d-1"><a href="https://atcoder.jp/contests/abc029/tasks/abc029_d#:~:text=%F0%9F%A7%AA-,D%20%2D%201,-%E9%A2%98%E8%A7%A3">D - 1</a></h5>
<p>求出[1,n] 的整数，其数的10进制中的1的个数之和</p>
<pre><code class="language-cpp">using i64 = long long;
i64 calc(i64 num)
{
    std::string s = std::to_string(num);
    int n = s.size();
    const i64 NIL = -1;
    std::vector dp(n, std::vector&lt;std::vector&lt;i64&gt;&gt;(n, std::vector&lt;i64&gt;(2, NIL)));
    auto dfs = [&amp;](auto self, int i, i64 cnt, bool is_limit) -&gt; i64
    {
        if (i == n)
        {
            return cnt;
        }
        auto &amp;ans = dp[i][cnt][is_limit];
        if (ans != NIL)
        {
            return ans;
        }
        i64 res = 0;
        int up = is_limit ? s[i] - '0' : 9;
        for (int d = 0; d &lt;= up; d++)
        {
            res += self(self, i + 1, cnt + (d == 1), is_limit and d == up);
        }
        return ans = res;
    };
    return dfs(dfs, 0, 0, true);
}
void solve()
{
    int n;
    std::cin &gt;&gt; n;
    std::cout &lt;&lt; calc(n) &lt;&lt; '\n';
}
</code></pre>
<h5 id="e-digit-sum-divisible"><a href="https://atcoder.jp/contests/abc336/tasks/abc336_e#:~:text=E%20%2D%20Digit%20Sum%20Divisible">E - Digit Sum Divisible</a></h5>
<p>求出[1,n]的符合条件的整数x,x满足x%(x的数位和)==0,</p>
<pre><code class="language-cpp">using i64 = long long;

i64 calc(i64 num)
{
    std::string s = std::to_string(num);
    int n = s.size();
    i64 ans = 0, D;
    const i64 NIL = -1;
    std::vector&lt;std::vector&lt;std::vector&lt;std::vector&lt;i64&gt;&gt;&gt;&gt; dp;

    auto dfs = [&amp;](auto self, int i, int sd, int r, bool is_limit) -&gt; i64
    {
        if (i == n)
        {
            return sd == D and r == 0;
        }
        auto &amp;ndp = dp[i][sd][r][is_limit];
        if (ndp != NIL)
        {
            return ndp;
        }
        i64 res = 0;
        int up = is_limit ? s[i] - '0' : 9;
        for (int d = 0; d &lt;= up; d++)
        {
            if (sd + d &gt; D)
            {
                continue;
            }
            res += self(self, i + 1, sd + d, (10 * r + d) % D, is_limit and d == up);
        }
        return ndp = res;
    };

    for (D = 1; D &lt;= 14 * 9; D++)
    {
        dp.assign(n, std::vector(D + 1, std::vector(D, std::vector(2, NIL))));
        ans += dfs(dfs, 0, 0, 0, true);
    }
    return ans;
}

void solve()
{
    i64 n;
    std::cin &gt;&gt; n;
    std::cout &lt;&lt; calc(n) &lt;&lt; '\n';
}
</code></pre>
<h6 id="problem-c-codeforces"><a href="https://codeforces.com/contest/1036/problem/C#:~:text=%E7%BF%BB%E8%AF%91-,C.%20Classy%20Numbers,-time%20limit%20per">Problem - C - Codeforces</a></h6>
<p>求出区间[L,R]中有多少个数满足：其数位中有至多3个非0数位</p>
<pre><code class="language-cpp">using i64 = long long;
i64 calc(i64 num)
{
    std::string s = std::to_string(num);
    int n = s.size();
    const i64 NIL = -1;
    std::vector dp(n, std::vector(n, std::vector(2, std::vector(2, NIL))));
    auto dfs = [&amp;](auto self, int i, int cnt, bool is_limit, bool is_num) -&gt; i64
    {
        if (i == n)
        {
            return is_num and cnt &lt;= 3;
        }
        auto &amp;ndp = dp[i][cnt][is_limit][is_num];
        if (ndp != NIL)
        {
            return ndp;
        }
        i64 ans = 0;
        int up = is_limit ? s[i] - '0' : 9;
        if (not is_num)
        {
            ans = self(self, i + 1, cnt, false, false);
        }
        for (int d = 0; d &lt;= up; d++)
        {
            if ((not is_num and d != 0) or is_num)
            {
                ans += self(self, i + 1, cnt + (d != 0), is_limit and d == up, true);
            }
        }
        return ndp = ans;
    };
    return dfs(dfs, 0, 0, true, false);
}
void solve()
{
    i64 L, R;
    std::cin &gt;&gt; L &gt;&gt; R;
    std::cout &lt;&lt; calc(R) - calc(L - 1) &lt;&lt; '\n';
}
</code></pre>
<h6 id="no741-ascnumbereasy"><a href="https://yukicoder.me/problems/no/741">No.741 AscNumber(Easy)</a></h6>
<p>求出[1,<span class="arithmatex"><span class="MathJax_Preview">10^{n}</span><script type="math/tex">10^{n}</script></span>]有多少个数字满足：其数位不递减<br />
对<span class="arithmatex"><span class="MathJax_Preview">10^{9}+7</span><script type="math/tex">10^{9}+7</script></span>取模</p>
<pre><code class="language-cpp">using Z = Mint&lt;i64&gt;;
void solve()
{
    int n;
    std::cin &gt;&gt; n;
    std::string s = &quot;1&quot; + std::string(n, '0');
    n = n + 1;
    const i64 NIL = -1;
    std::vector dp(n, std::vector(10, NIL));
    auto dfs = [&amp;](auto self, int i, int cur, bool is_limit, bool is_asc) -&gt; Z
    {
        if (i == n)
        {
            return is_asc;
        }
        auto &amp;ndp = dp[i][cur];
        if (ndp != NIL)
        {
            return ndp;
        }
        Z ans = 0;
        int up = is_limit ? s[i] - '0' : 9;
        for (int d = 0; d &lt;= up; d++)
        {
            if (d &gt;= cur)
            {
                ans += self(self, i + 1, d, is_limit and d == up, true);
            }
        }
        return ndp = ans.v;
    };
    std::cout &lt;&lt; dfs(dfs, 0, 0, true, true) &lt;&lt; '\n';
}
</code></pre>
<h6 id="d-beautiful-numbers"><a href="https://codeforces.com/problemset/problem/55/D">D. Beautiful numbers</a></h6>
<p>给定范围[L,R],<br />
当且仅当正整数可以被其非零位数整除时，它才是美丽的.计算给定范围内美丽数字的数量。</p>
<p><strong>多组重复贡献时，贴上限,is_limit==true的位不进行记忆化</strong></p>
<pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
#include &lt;bits/extc++.h&gt;
using i64 = long long;
const int N = 20;
const int M = 2520;
const i64 NIL = -1;
int id[M + 1];
void init()
{
    for (int i = 1, j = 1; i &lt;= M; i++)
    {
        if (M % i == 0)
        {
            id[i] = j++;
        }
    }
}
std::vector&lt;std::vector&lt;std::vector&lt;std::vector&lt;i64&gt;&gt;&gt;&gt; dp;
i64 calc(i64 num)
{
    std::string s = std::to_string(num);
    std::reverse(s.begin(), s.end());
    int n = s.size();

    auto dfs = [&amp;](auto self, int i, int cur, int r, bool is_limit) -&gt; i64
    {
        if (i == -1)
        {
            return r % cur == 0;
        }
        auto &amp;ndp = dp[i][id[cur]][r][is_limit];
        if (not is_limit and ndp != NIL)
        {
            return ndp;
        }
        i64 res = 0;
        int up = is_limit ? s[i] - '0' : 9;
        for (int d = 0; d &lt;= up; d++)
        {
            int ncur = d ? cur / std::gcd(cur, d) * d : cur;
            int nr = (r * 10 + d) % M;
            res += self(self, i - 1, ncur, nr, is_limit and d == up);
        }
        if (not is_limit)
        {
            ndp = res;
        }
        return res;
    };
    return dfs(dfs, n - 1, 1, 0, true);
}
void solve()
{
    i64 L, R;
    std::cin &gt;&gt; L &gt;&gt; R;
    std::cout &lt;&lt; calc(R) - calc(L - 1) &lt;&lt; '\n';
    // std::cout &lt;&lt; calc(R) &lt;&lt; ' ' &lt;&lt; calc(L - 1) &lt;&lt; '\n';
}
int main()
{
    std::cin.tie(nullptr)-&gt;sync_with_stdio(false);

    init();
    dp = std::vector(N, std::vector(60, std::vector(M, std::vector(2, NIL))));

    int t;
    std::cin &gt;&gt; t;
    while (t--)
    {
        solve();
    }
    return 0;
}
</code></pre>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>