---
title: ABC040
date: 2025-07-02
---

[C - 柱柱柱柱柱](https://atcoder.jp/contests/abc040/tasks/abc040_c)

给定 $N$ 个木桩, 每个木桩高为: $a_i$ 。
若当前为第 $i$ 个木桩, 则下一次可以走到第 $i+1$ 或 $i+2$ 个木桩。
从第 $1$ 个木桩走到第 $N$ 个木桩,
高度差的绝对值之和最小为多少?

线性dp。
记录每个木桩的最小费用即可。(初始化起点费用为0,其他的为INF)

```cpp
using i64 = long long;
template <typename T> inline bool chmin(T &a, T &&b) {
  if (a > b) {
    a = b;
    return true;
  }
  return false;
}
const int INF=1<<30;
void solve()
{
    int N;std::cin>>N;
    std::vector<int>a(N);
    for(auto&x:a)std::cin>>x;
    std::vector<int>dp(N,INF);
    dp[0]=0;
    for(int i=0;i<N;i++){
        for(int j:{i+1,i+2})if(j<N){
            chmin(dp[j],dp[i]+std::abs(a[i]-a[j]));
        }
    }
    std::cout<<dp[N-1]<<'\n';
}

```

[D - 道路の老朽化対策について](https://atcoder.jp/contests/abc040/tasks/abc040_d)

给定无向图, 有 $N$ 个点, $M$ 条边。
边上有权值 $y$ 。

对于询问 $v,w$ , 对于 $y > w$ 的边,其可以建边,
问对于 $v$ 点,有多少个可达的顶点?

注意到建边有权值的大小影响
若按照 $w$ 从大到小完成查询,
在权值大时建边一定符合权值小的查询

故离线查询即可

```cpp
using Q = std::tuple<int,int,int>;
using E = std::tuple<int,int,int>;

void solve(){
    int n,m;
    read(n,m);
    std::vector<E>edge(m);
    for(auto&[w,u,v]:edge){
        read(u,v,w);
        --u,--v;
    }
    int q;
    read(q);
    std::vector<Q>qry(q);
    for(int i = 0;i < q;i++){
        auto&[w,u,qid]=qry[i];
        read(u,w);
        qid = i;
        --u;
    }
    std::sort(qry.rbegin(),qry.rend());
    std::sort(edge.rbegin(),edge.rend());

    Dsu dsu(n);
    std::vector<int>ans(q,0);

    size_t i = 0;
    for(auto[w,u,qid]:qry){
        for(;i < edge.size();i++){
            auto[ew,eu,ev] = edge[i];
            if(ew <= w){
                break;
            }
            dsu.merge(eu,ev);
        }
        ans[qid] = dsu.size(u);
    }

    for(int i=0;i<q;i++){
        std::cout<<ans[i]<<"\n";
    }
}

int main(){
    std::cin.tie(nullptr)->sync_with_stdio(false);
    int t=1;
#if 0
    std::cin>>t;
#endif
    while(t--){
        solve();
    }
    return 0;
}
```